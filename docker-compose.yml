version: "3.4"
services:
    postgres:
        image: kartoza/postgis:12.0
        container_name: nobis_postgres_cont
        environment:
            - POSTGRES_USER=${POSTGRES_USER}
            - POSTGRES_PASS=${POSTGRES_PASSWORD}
            - POSTGRES_DBNAME=${POSTGRES_DB}
            - DATADIR=${PGDATA}
        ports:
            - "${POSTGRES_PORT}:5432"
        volumes: 
            - pg_data:/var/lib/postgresql
            # In caso si voglia fare un dump iniziale va messo nella cartella ./database
            #- ./database/dump.sql:/docker-entrypoint-initdb.d/initDump.sql


# Create a volume to contain postgres data, kept safe by docker through the life cycle of the stack
# to inspect where the data is located use docker volume ls
volumes:
  pg_data: